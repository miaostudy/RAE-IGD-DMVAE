# Cifar
## 结果
| 模型       | train acc | val acc |
|----------|-----------|---------|
| resnet10 |           | 81.3%   |
| resnet18 |           | 79.1%   |
## MiniMax训练
因为是类别引导的Dit, 不训练的话采样出来的全是imagenet的图片
```shell
CUDA_VISIBLE_DEVICES=0,1 torchrun --nnode=1 --nproc_per_node --master_port=25678 train_dit.py --model DiT-XL/2 \
     --data-path /data/wlf/datasets/cifar10 --ckpt pretrained_models/DiT-XL-2-256x256.pt \
     --global-batch-size 8 --tag minimax --ckpt-every 12000 --log-every 1500 --epochs 8 \
     --condense --finetune-ipc -1 --results-dir ../logs/run-0 --spec cifar10
```
## 代理模型训练
### resnet10
```shell
python IGD/train_ckpts.py -d cifar10 -n resnet --nclass 10 --norm_type instance --tag test --slct_type random --mixup vanilla --repeat 1 --ckpt-dir ./ckpts/cifar10/resnet10/ --epochs 50 --depth 10 --ipc -1 --data_dir /data/wlf/datasets/
```
[](https://youke2.picui.cn/s1/2025/12/29/69525daa32bd4.png)
### resnet18
```shell
python IGD/train_ckpts.py -d cifar10 -n resnet --nclass 10 --norm_type instance --tag test --slct_type random --mixup vanilla --repeat 1 --ckpt-dir ./ckpts/cifar10/resnet18/ --epochs 50 --depth 18 --ipc -1 --data_dir /data/wlf/datasets/
```

### convnet6
```shell
python IGD/train_ckpts.py -d cifar10 -n convnet6 --nclass 10 --norm_type instance --tag test --slct_type random --mixup vanilla --repeat 1 --ckpt-dir ./ckpts/cifar10/convnet6/ --epochs 50 --depth 6 --ipc -1
```

## 采样
### resnet10
这里采样图像因为生成模型的原因只能生成256的，原数据集是128的。
```shell
python IGD/sample_mp.py --model DiT-XL/2 --image-size 256 --ckpt pretrained_models/0012000.pt --save-dir "./results/dit-distillation/cifar10-10-minimax-igd-resnet10-k15-gamma10-r1-gi100-low30-high45" --data-path /data/wlf/datasets/ --gm-scale 15 --grad-ipc 10 --net-type resnet --depth 10 --low 30 --high 45  --ckpt_path ckpts --repeat 1 --num-samples 10 --dev-scale 10 --nclass 10 --phase 0 --target_nclass 10 --spec cifar10
```



# ImageNette
## 结果
## ckpt
### resnet-10
```shell
python IGD/train_ckpts.py -d imagenet -n resnet --nclass 10 --norm_type instance --tag test --slct_type random --mixup vanilla --repeat 1 --ckpt-dir ./ckpts/cifar10/resnet10/ --epochs 50 --depth 10 --ipc -1 --data_dir /data/wlf/datasets/
```
acc: 83.2






同一个模型，只有ckpt准确率有差别，看看结果谁好？